syntax = "proto3";

package worker.v1;

// option go_package = "worker/v1";

// WorkerService defines the RPC methods for worker nodes in a distributed task execution system.
// Workers receive tasks from coordinators, process them, and send periodic heartbeats
// to maintain their active status in the worker pool.
service WorkerService {
  // ReceiveTask is called by the coordinator to assign a task to this worker.
  // The worker processes the task asynchronously and returns an acknowledgment.
  // The actual task result is reported separately upon completion.
  rpc ReceiveTask (ReceiveTaskRequest) returns (ReceiveTaskResponse);
}

// ReceiveTaskRequest contains the information needed for a worker to process a task.
// It is sent from the coordinator to the worker when assigning work.
message ReceiveTaskRequest {
  // task_id is the unique identifier for this task, used for tracking and status updates.
  string task_id = 1;

  // payload contains the task data or command to be executed by the worker.
  // The format and content depend on the task type (e.g., shell command, function name, etc.).
  string payload = 2;
}

// ReceiveTaskResponse is the worker's acknowledgment that it received the task assignment.
// This is not the final task result, but rather confirmation that the worker accepted the task.
message ReceiveTaskResponse {
  // task_id echoes back the unique identifier of the received task.
  string task_id = 1;

  // message provides additional context about the task acceptance or any immediate issues.
  string message = 2;

  // success indicates whether the worker successfully accepted the task for processing.
  // False may indicate the worker is overloaded or unable to accept new tasks.
  bool success = 3;
}
